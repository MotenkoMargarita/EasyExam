{% from 'macro/macro.html' import headBegin with context %}
{% from 'macro/macro.html' import headEnd with context %}
{% from 'macro/macro.html' import nav with context %}
{% from 'macro/macro.html' import footer with context %}
{% from 'macro/macro.html' import end with context %}
{% from 'macro/macro.html' import mathjaxToShow with context %}


{{ headBegin() }}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">

<title>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ï–ì–≠</title>
{{ mathjaxToShow() }}
{{ headEnd() }}

{{ nav() }}

<div class="container">

    {% for message in get_flashed_messages() %}
        <div class="alert alert-warning mt-3" role="alert">
            {{ message }}
        </div>
    {% endfor %}

    <!-- –í—ã–≤–æ–¥ -->
    <div class="card mt-3 mb-3">
        <h5 class="card-header">
            {% for subject in subjects %}
                {% if question.subject_id == subject.id %}
                  <font size="5"  face="Times New Roman" color="maroon">üìñ {{ subject.name }}.</font>
                {% endif %}
            {% endfor %}
            –í–æ–ø—Ä–æ—Å ‚Ññ
            {{ question.number }}
        </h5>
        <div class="card-body">
            <div class="">
               <!-- <div class="mb-3">
                    <label for="subject_select" class="form-label" style="color: brown"><font size="3" face="Impact">–ü—Ä–µ–¥–º–µ—Ç</font></label>
                    <font size="3" face="Times New Roman"><input class="form-control-plaintext" value="{{ question.subject.name }}" disabled></font>
                </div>
                <div class="mb-3" style="color: brown;">
                  <font size="3" face="Impact">  <label for="number" class="form-label">–í–æ–ø—Ä–æ—Å </label>
                    <input class="form-control-plaintext" value=" ‚Ññ {{ question.number }}" disabled></font>
                </div>

                <div class="mb-3">
                    <label for="source_select" class="form-label"><font size="3" face="Arial" color="#a0522d">üì© –ò—Å—Ç–æ—á–Ω–∏–∫</font></label>
                    <div class="">
                       <font size="3" face="Times New Roman">  {% if question.source %}
                            <a href="{{ question.source.link }}">{{ question.source.name }}</a>
                        {% else %}
                           <p>–ò—Å—Ç–æ—á–Ω–∏–∫ –Ω–µ —É–∫–∞–∑–∞–Ω</p></font>
                        {% endif %}
                    </div>-->

                </div>

                <div class="mb-3">
                    <label class="form-label"><font size="5" face="Arial Black" color="maroon">üìë –ó–∞–¥–∞–Ω–∏–µ</font></label>
                    <div class="spaces" id="textTextAreaResult{{ question.id }}">
                       <font size="5" face="Arial"> {{ question.text }} </font>
                    </div>
                </div>

             <div class="mb-3">
                    <label for="source_select" class="form-label"><font size="3" face="Arial" color="#a0522d">üì© –ò—Å—Ç–æ—á–Ω–∏–∫</font></label>
                    <div class="">
                       <font size="3" face="Times New Roman">  {% if question.source %}
                            <a href="{{ question.source.link }}">{{ question.source.name }}</a>
                        {% else %}
                           <p>–ò—Å—Ç–æ—á–Ω–∏–∫ –Ω–µ —É–∫–∞–∑–∞–Ω</p></font>
                        {% endif %}
                    </div>

                <div class="mb-3">
                    <label class="form-label"><font size="5" face="Arial Black" color="#006400">‚úÖ –û—Ç–≤–µ—Ç</font></label>
                    <div class="spaces" id="textTextAreaResultAnswer{{ question.id }}">
                       <font size="5" face="Arial"> {{ question.answer }}</font>
                    </div>
                </div>

                <div class="mb-3">
                    {% for image in question.images %}

                        <img src="{{ url_for('static', filename= "image/uploads/" + image.source) }}"
                             class="rounded mx-auto d-block mb-3" id="questionImage1"
                             style="max-width: 100%; max-height: 300px; min-height: 200px;">
                    {% endfor %}
                </div>
            </div>

            {% if is_second %}
                <div class="d-grid gap-2">
                    <a href="{{ url_for('show_req', subject_id=question.subject_id, question_number=question.number) }}"
                       class="btn btn-outline-secondary"><font size="5" face="Arial Black" color="#ff8c00"> ‚ö† –ö—Ä–∏—Ç–µ—Ä–∏–∏</font></a>
                </div>
            {% endif %}

        </div>
    </div>
    <!-- /–í—ã–≤–æ–¥ –≤–æ–ø—Ä–æ—Å–∞ -->

    {% if current_user.is_authenticated %}
        {% if current_user.role.name == 'Admin' or current_user.role.name == 'Teacher' %}
            <form action="{{ url_for('solution') }}" method="get">
                <div class="d-grid gap-2">
                    <input type="hidden" name="question_id" value="{{ question.id }}">
                    <button type="submit" class="btn btn-primary mb-3">–î–æ–±–∞–≤–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ</button>
                </div>
            </form>
        {% endif %}
    {% endif %}


    {% if question.solutions %}
        <h2 class="text-center mb-3"><font size="5" face="Arial Black" color="#a52a2a">üìù –†–µ—à–µ–Ω–∏—è:</font></h2>
        {% for sol in question.solutions %}
            <div class="card border-dark mb-4">
                <h5 class="card-header">
                    <font size="3" face="Arial Black" color="#006400">   ‚úÖ –†–µ—à–µ–Ω–∏–µ ‚Ññ {{ loop.index }} </font>
                </h5>
                <div class="card-body">
                    <div class="mb-3">
                        <label class="form-label"><font size="4" face="Arial Black" color="maroon"> –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è:</font></label>
                        <font size="5" face="Arial Black">   <input type="text" class="form-control-plaintext" value="{{ sol.description }}" disabled></font>
                    </div>

                    <div class="mb-3">
                        <font size="4" face="Arial Black" color="maroon"> <label for="text">–í–µ—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:</label></font>
                        <font size="5" face="Arial" > <p class="spaces">{{ sol.text }}</p></font>
                    </div>

                    <div class="mb-3">
                        {% for image in sol.images %}
                            <img src="{{ url_for('static', filename= "image/uploads/" + image.source) }}"
                                 class="rounded mx-auto d-block mb-3" id="solutionImage{{ sol.id }}"
                                 style="max-width: 100%; max-height: 300px; min-height: 200px;">
                        {% endfor %}
                    </div>

                    {% if sol.file %}
                        <div class="d-grid gap-3 mb-3">
                            <a href="{{ url_for('download_solution', filename=sol.file) }}"
                               target="_blank"
                               class="btn btn-outline-success">–°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª</a>
                        </div>
                    {% endif %}

                </div>
            </div>
        {% endfor %}
    {% else %}
        <h4 class="text-center">–†–µ—à–µ–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</h4>
    {% endif %}


</div>

{{ end() }}