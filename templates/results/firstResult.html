{% from 'macro/macro.html' import headBegin with context %}
{% from 'macro/macro.html' import headEnd with context %}
{% from 'macro/macro.html' import nav with context %}
{% from 'macro/macro.html' import footer with context %}
{% from 'macro/macro.html' import end with context %}
{% from 'macro/macro.html' import mathjaxToShow with context %}

{{ headBegin() }}
<script src="/static/js/test.js"></script>

<title>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ï–ì–≠</title>
{{ mathjaxToShow() }}
{{ headEnd() }}

{{ nav() }}

<div class="container">
    {% for message in get_flashed_messages() %}
        <div class="alert alert-warning mt-3" role="alert">
            {{ message }}
        </div>
    {% endfor %}

    <div class="mt-3 mb-3 d-flex justify-content-between">
        <h2><font color="maroon" size="4"> üìñ {{ subject.name }} : üìù {{ test_type.name }}</font></h2>
        <h2>
            <div><font size="5" face="Impact" color="#a0522d">‚åõ –ü–æ—Ç—Ä–∞—á–µ–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ {{ result.time_spent }}</font></div>
        </h2>
    </div>

    <div class="mt-3 mb-3 d-flex justify-content-between">
        <h2 > <font size="5"> üèÜ –í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
       <font color="#dc143c">{{ result.first_part_first_mark }}</font>  –ø–µ—Ä–≤–∏—á–Ω—ã—Ö –±–∞–ª–ª–∞</font>  <!--‚ö°
         <font color="#dc143c"> {{ result.first_part_test_mark }}</font> —Ç–µ—Å—Ç–æ–≤—ã—Ö --></h2>
    </div>

    <form action="{{ url_for('send_to_teacher') }}" method="POST" enctype="multipart/form-data">

        <input type="hidden" name="timeLeft" id="timeLeft">
        {% for question in test.questions | sort(attribute='number') %}
            {% if question_number_question_info[question.number].questionType_id == 1 %}
                <!-- –ü–µ—Ä–≤–∞—è —á–∞—Å—Ç—å -->
                {% if question_id_answer[question.id] == question.answer %}
                    <div class="card border-success mb-3">
                {% else %}
                    <div class="card border-danger mb-3">
                {% endif %}
            <h5 class="card-header">
                {% for subject in subjects %}
                    {% if question.subject_id == subject.id %}
                        {{ subject.name }}.
                    {% endif %}
                {% endfor %}
               <font  color="maroon"> ‚úç –ó–∞–¥–∞–Ω–∏–µ ‚Ññ
                {{ question.number }}</font>
            </h5>
            <div class="card-body">
                <div>
                    <div class="mb-3">
                        <label class="form-label"><font size="3" face="Impact" color="maroon">–¢–µ–∫—Å—Ç –∑–∞–¥–∞–Ω–∏—è:</font> </label>
                        <div class="spaces" id="textTextAreaResult{{ question.id }}">
                          <font size="5" face="Arial"> {{ question.text }}</font>
                        </div>
                    </div>
                    <div class="mb-3">
                        {% for image in question.images %}
                            <img src="{{ url_for('static', filename= "image/uploads/" + image.source) }}"
                                 class="rounded mx-auto d-block mb-3" id="questionImage1"
                                 style="max-width: 100%; max-height: 300px; min-height: 200px;">
                        {% endfor %}
                    </div>

                    {% if question_id_answer[question.id] == question.answer %}
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label" style="color: darkgreen"><font size="4" face="Arial Black">‚úÖ –û—Ç–≤–µ—Ç: </font></label>
                            <div class="col-sm-10">
                               <font size="5"> <input type="text" class="form-control-plaintext"
                                       name="question{{ question.id }}"
                                       value="{{ question_id_answer[question.id] }}" disabled></font>
                            </div>
                        </div>
                    {% else %}
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label" style="color: crimson"><font size="4" face="Arial Black"> ‚ùå –í–∞—à –æ—Ç–≤–µ—Ç: </font></label>
                            <div class="col-sm-10">
                                <font size="5"> <input type="text" class="form-control-plaintext"
                                       name="question{{ question.id }}"
                                                       value="{{ question_id_answer[question.id] }}" disabled></font>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label" style="color: darkgreen"><font size="4" face="Arial Black">‚úÖ –í–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç: </font></label>
                            <div class="col-sm-10">
                             <font size="5">    <input type="text" class="form-control-plaintext"
                                       name="question{{ question.id }}"
                                                       value="{{ question.answer }}" disabled></font>
                            </div>
                        </div>
                    {% endif %}


                </div>
            </div>
            </div>
                <!-- /–ü–µ—Ä–≤–∞—è —á–∞—Å—Ç—å -->
            {% else %}
                <!-- –í—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å -->
                <div class="card mb-3">
                    <h5 class="card-header">
                        {% for subject in subjects %}
                            {% if question.subject_id == subject.id %}
                                {{ subject.name }}.
                            {% endif %}
                        {% endfor %}
                        <font  color="maroon"> ‚úç –ó–∞–¥–∞–Ω–∏–µ
                            {{ question.number }}</font>
                    </h5>
                    <div class="card-body">
                        <div>
                            <div class="mb-3">
                                <label class="form-label"><font size="3" face="Impact" color="maroon">–¢–µ–∫—Å—Ç –∑–∞–¥–∞–Ω–∏—è:</font> </label>
                                <div class="spaces" id="textTextAreaResult{{ question.id }}">
                                    <font size="5" face="Arial"> {{ question.text }}</font>
                                </div>
                            </div>
                            <div class="mb-3">
                                {% for image in question.images %}
                                    <img src="{{ url_for('static', filename= "image/uploads/" + image.source) }}"
                                         class="rounded mx-auto d-block mb-3" id="questionImage{{ image.id }}"
                                         style="max-width: 100%; max-height: 300px; min-height: 200px;">
                                {% endfor %}
                            </div>
                            <div class="mb-3">
                                <h5 class="text-center">‚åõ –≠—Ç–æ –∑–∞–¥–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–º</h5>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /–í—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å -->
            {% endif %}
        {% endfor %}

        {% if teachers %}
            <div class="mb-3">
                <label class="form-label">‚ö† –í—ã–±–µ—Ä–∏—Ç–µ —É—á–∏—Ç–µ–ª—è , –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤–∞—à—É —Ä–∞–±–æ—Ç—É</label>
                <select class="form-select mr-sm-2" name="teacher_id">
                    <option value="0">üìé –í—ã–±–µ—Ä–∏—Ç–µ —É—á–∏—Ç–µ–ª—è</option>
                    {% for teacher in teachers %}
                        <option value="{{ teacher.id }}">{{ teacher.first_name }} {{ teacher.last_name }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="d-grid gap-3  mb-3">
                <input type="hidden" name="result_id" value="{{ result.id }}">
                <button type="submit" class="btn btn-primary"><font size="4"> üì© –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É</font></button>
            </div>
        {% else %}
            <div class="mb-3">
                <h3 class="text-center">üò® –£ –≤–∞—Å –Ω–µ—Ç —É—á–∏—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É</h3>
            </div>
        {% endif %}
    </form>

</div>

{{ end() }}